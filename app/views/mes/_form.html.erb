<%content_for :head do%>
  <link type="text/css" href="/jquery/themes/base/ui.all.css" rel="stylesheet" />
  <link type="text/css" href="/jquery/jquery.tooltip.css" rel="stylesheet" />  
  <script src="http://www.google.com/jsapi?key=ABQIAAAA0aPSfqH7oXHLMke32qWrrhQq3Y2jEBJKNfmKkXKywvMG3gFN5hT7d_uJortdOGY0q3roGS3LoTiErQ" type="text/javascript"></script>
	<script type="text/javascript" src="/jquery/jquery-1.3.2.js"></script>
	<script type="text/javascript" src="/jquery/ui/ui.core.js"></script>
	<script type="text/javascript" src="/jquery/ui/ui.draggable.js"></script>
	<script type="text/javascript" src="/jquery/ui/ui.resizable.js"></script>
	<script type="text/javascript" src="/jquery/ui/ui.dialog.js"></script>
	<script type="text/javascript" src="/jquery/external/bgiframe/jquery.bgiframe.js"></script>
	<script type="text/javascript" src="/jquery/jquery.tooltip.js"></script>
  <script language="Javascript" type="text/javascript">
  //<![CDATA[
	jQuery.noConflict();
	
  google.load("search", "1");

  function OnLoad() {
    var searchControl = new google.search.SearchControl();
		
		var options = new google.search.SearcherOptions();
		options.setExpandMode(google.search.SearchControl.EXPAND_MODE_OPEN);

    searchControl.addSearcher(new google.search.ImageSearch(), options);
    searchControl.setOnKeepCallback(this, MyKeepHandler);

		var drawOptions = new google.search.DrawOptions();
		drawOptions.setDrawMode(google.search.SearchControl.DRAW_MODE_LINEAR);
    
    searchControl.draw(document.getElementById("searchcontrol"), drawOptions);

    // Execute an inital search
    //searchControl.execute("Google");
  }
  
  
  
  // establish a keep callback
	

	function MyKeepHandler(result) {
		document.getElementById('me_image_url').value = result.url;
		jQuery('#searchcontrol').dialog('close');
		// clone the result html node
		//var node = result.html.cloneNode(true);

		// attach it
		//var savedResults = document.getElementById("saved_results");
		//savedResults.appendChild(node);
	}

	google.setOnLoadCallback(OnLoad);

  //]]>
  </script>	
	<script type="text/javascript">
	 	

		
 jQuery(document).ready(function() {

  jQuery(function() {
		
		jQuery("#searchcontrol").dialog({
			bgiframe: true,
			autoOpen: false,
			height: 500,
			width: 325,
			modal: true
		});
		
		//jQuery("#enable_comments_tt").dialog({
		//	bgiframe: true,
		//  autoOpen: false,
		//	width: 300,
		//	modal: false
		//});

		jQuery("#keep_comments_tt").dialog({
			bgiframe: true,
			autoOpen: false,
			width: 375,
			modal: false
		});				

	});
		
	jQuery('#imgSearchLink').click(function() {
		jQuery('#searchcontrol').dialog('open');
	});
	
  //jQuery("#me_enable_comments_q").click(
  //  function () {
  //    jQuery("#enable_comments_tt").dialog('open');
  //  }
  //);
  
  jQuery("#me_keep_comments_q").click(
    function () {
      jQuery("#keep_comments_tt").dialog('open');
    }
  );  
  
  jQuery("#formLeftContainer *").tooltip();
	

 });
		
	</script>
<%end%>
<div id='enable_comments_tt' title="Enable Comments" style="display:none">
  Uncheck this box to disable commenting on your me.<br />
</div>
<div id='keep_comments_tt' title="Keep Comments" style="display:none">
  Check this box to keep all existing comments.<br/>
  Normally, the comments will be cleared whenever your <br/>
  me is updated. You should only check this box when <br/>
  making minor tweaks to your me.<br />
</div>

<div id="searchcontrol" title="Image Search" style="display:none">

</div>


<p style="clear:both">
  <div class="edit_me_label"><label for="me_title">Title</label></div>
  <div class="edit_me_text"><%= text_field :me, :title, :class => 'text_field' %></div>
</p>
<p style="clear:both">
  <div class="edit_me_label"><label for="me_image_url">Image URL</label></div>
  <div class="edit_me_text"><%= text_field :me, :image_url, :class => 'text_field' %>&nbsp;<a href="#" id="imgSearchLink">Image Search</a></div>  
</p>
<p style="clear:both">
  <div class="edit_me_label"></div>
  <div class="edit_me_text"><%= select('section1', 'section_id', @sections.collect {|s| [s.name, s.id]}) %></div>
</p>
<p style="clear:both">
	<div class="edit_me_label"></div>
  <div class="edit_me_text"><%= text_field 'section1', 'value', :class => 'text_field' %></div>
  <%= hidden_field 'section1', 'section_type' %>
</p>
<p style="clear:both">
  <div class="edit_me_label"></div>
  <div class="edit_me_text"><%= select('section2', 'section_id', @sections.collect {|s| [s.name, s.id]}) %></div>
</p>  
<p style="clear:both">
	<div class="edit_me_label"></div>
  <div class="edit_me_text"><%= text_field 'section2', 'value', :class => 'text_field' %></div>
  <%= hidden_field 'section2', 'section_type' %>
</p>
<p style="clear:both">
  <div class="edit_me_label"></div>
  <div class="edit_me_text""><%= select('section3', 'section_id', @sections.collect {|s| [s.name, s.id]}) %></div>
</p>
<p style="clear:both">  
  <div class="edit_me_label"></div>
  <div class="edit_me_text"><%= text_field 'section3', 'value', :class => 'text_field' %></div>
  <%= hidden_field 'section3', 'section_type' %>
</p>
<p style="clear:both">
  <div class="edit_me_label"></div>
  <div><%= select('section4', 'section_id', @sections.collect {|s| [s.name, s.id]}) %></div>
</p>
<p style="clear:both">
  <div class="edit_me_label"></div>  
  <div class="edit_me_text"><%= text_field 'section4', 'value', :class => 'text_field' %></div>
  <%= hidden_field 'section4', 'section_type' %>
</p>
<p style="clear:both">
  <div class="edit_me_label"><label for="me_title">Soapbox</label></div>
  <div class="edit_me_text"><%= text_area 'section5', 'value', :class => 'text_field' %></div>
  <%= hidden_field 'section5', 'section_type' %>
</p>

